import{_,a as i,c as r,b as e,d as m,u as g,g as $,r as I,t as u,e as v,n as k,h as y,p as P,i as B,o as x,j as U,k as b,f as p,F as C,l as F}from"./index.f0fafa43.js";const H={},L={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},M=e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),S=e("path",{d:"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"},null,-1),j=[M,S];function z(s,t){return i(),r("svg",L,j)}const E=_(H,[["render",z]]),N={},V={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},D=e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),Y=e("path",{d:"M9 4h6a2 2 0 0 1 2 2v14l-5 -3l-5 3v-14a2 2 0 0 1 2 -2"},null,-1),q=[D,Y];function A(s,t){return i(),r("svg",V,q)}const G=_(N,[["render",A]]),J=s=>(P("data-v-2472910d"),s=s(),B(),s),K={key:0,class:"post"},O={key:1,class:"post"},Q={class:"top"},R={class:"username"},T={class:"usertag"},W=J(()=>e("span",{class:"date"},"16h",-1)),X={class:"mid"},Z={class:"bottom"},ss=m({__name:"Post",props:{post:null},setup(s){const{post:t}=s,n=g(),l=$(),o=I(null),h=()=>{o.value!==null&&y.push(`/user/${o.value.tag}`)},d=c=>{c!==null&&n.like(c)},w=c=>{c!==null&&n.bookmark(c)};return(async()=>{if(o.value=l.getUserById(t.userId),o.value===null)await l.fetchUserById(t.userId);else return;o.value=l.getUserById(t.userId)})(),(c,a)=>o.value?(i(),r("div",O,[e("div",Q,[e("span",{class:"user-info",onClick:a[0]||(a[0]=f=>h())},[e("span",R,u(o.value.name),1),e("span",T,"@"+u(o.value.tag),1)]),W]),e("div",X,u(s.post.content),1),e("div",Z,[e("span",null,u(s.post.likeCount),1),v(E,{class:k(["icon",{active:s.post.liked}]),onClick:a[1]||(a[1]=f=>d(s.post))},null,8,["class"]),v(G,{class:k(["icon",{active:s.post.bookmarked}]),onClick:a[2]||(a[2]=f=>w(s.post))},null,8,["class"])])])):(i(),r("div",K,"Loading..."))}});const es=_(ss,[["__scopeId","data-v-2472910d"]]),ns=m({__name:"PostLister",props:{user:null},setup(s){const{user:t}=s,n=g();t===null?n.fetchFeedPosts():n.fetchUserPosts(t.id);const l=o=>{window.innerHeight+window.scrollY>=document.body.offsetHeight&&(t===null?n.fetchFeedPosts():n.fetchUserPosts(t.id))};return x(()=>{window.addEventListener("scroll",l)}),U(()=>{window.removeEventListener("scroll",l)}),(o,h)=>(i(!0),r(C,null,b(s.user===null?p(n).getFeedPosts:p(n).getUserPosts(s.user),d=>(i(),F(es,{post:d,key:d.id},null,8,["post"]))),128))}});export{ns as _};
