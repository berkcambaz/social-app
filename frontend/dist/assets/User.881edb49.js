import{_ as b,a as u,c as d,q as S,d as I,j as P,r as h,o as N,f as i,b as t,s as $,t as r,e as _,m as x,p as V,l as E,h as F,w as T,v as L,F as j,k as p,x as D}from"./index.297d7982.js";import{d as H}from"./date.6932e95c.js";import{c as M,L as C}from"./Loader.603cecb8.js";const q={},z={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},A=S('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><rect x="4" y="5" width="16" height="16" rx="2"></rect><line x1="16" y1="3" x2="16" y2="7"></line><line x1="8" y1="3" x2="8" y2="7"></line><line x1="4" y1="11" x2="20" y2="11"></line><line x1="11" y1="15" x2="12" y2="15"></line><line x1="12" y1="15" x2="12" y2="18"></line>',7),G=[A];function J(e,g){return u(),d("svg",z,G)}const K=b(q,[["render",J]]),U=e=>(V("data-v-eccb80a1"),e=e(),E(),e),O={key:0,class:"user-edit-profile"},Q={class:"container"},R={class:"text-section"},W=U(()=>t("label",{for:"username"},"username",-1)),X={class:"text-section"},Y=U(()=>t("label",{for:"bio"},"bio",-1)),Z=["disabled"],ee={key:0,class:"loader-container"},te=I({__name:"UserEditProfile",props:{editingProfile:{type:Boolean},user:null},setup(e){const{editingProfile:g,user:a}=e,y=P(),f=M(),c=h(null),m=h({limit:32,current:0}).value,s=h(null),o=h({limit:256,current:0}).value,v=()=>{const n=c.value;!n||(m.current=n.value.length)},w=()=>{const n=s.value;!n||(o.current=n.value.length,n.style.height="0",n.style.height=n.scrollHeight+"px")},B=async()=>{if(!c.value||!s.value)return!1;const n=c.value.value,l=s.value.value;return n.length===0||n.length>32||l.length>256?!1:(await f.value.wait(y.editUser(n,l)),!0)};return N(()=>{c.value&&a&&(c.value.value=a.name),s.value&&a&&(s.value.value=a.bio),v(),w()}),(n,l)=>e.editingProfile||i(f).status?(u(),d("div",O,[t("div",{class:"background",onClick:l[0]||(l[0]=k=>e.editingProfile=!1)}),t("div",Q,[t("div",R,[W,$(" "+r(`${i(m).current}/${i(m).limit}`),1)]),t("input",{type:"text",id:"username",class:"singleline-input",ref_key:"usernameInput",ref:c,onInput:l[1]||(l[1]=k=>v())},null,544),t("div",X,[Y,$(" "+r(`${i(o).current}/${i(o).limit}`),1)]),t("textarea",{class:"multiline-input",ref_key:"bioInput",ref:s,onInput:l[2]||(l[2]=k=>w())},null,544),t("button",{class:"button",onClick:l[3]||(l[3]=async()=>{await B()&&(e.editingProfile=!1)}),disabled:i(f).status},"done",8,Z),i(f).status?(u(),d("div",ee,[_(C)])):x("",!0)])])):x("",!0)}});const se=b(te,[["__scopeId","data-v-eccb80a1"]]),ne={key:1,class:"user"},oe={key:2,class:"user"},le={class:"username"},ie={class:"usertag"},ae={class:"date"},re={class:"bottom"},ue={class:"follow-container"},ce=I({__name:"User",props:{user:null},setup(e){const g=P(),a=h(!1),y=s=>{s!==null&&g.follow(s)},f=s=>{s!==null&&p.push(`/user/${s.tag}/followers`)},c=s=>{s!==null&&p.push(`/user/${s.tag}/followings`)},m=()=>{a.value=!1,D(()=>{a.value=!0})};return(s,o)=>(u(),d(j,null,[a.value&&e.user?(u(),F(se,{key:0,editingProfile:a.value,user:e.user},null,8,["editingProfile","user"])):x("",!0),e.user?(u(),d("div",oe,[t("div",le,r(e.user.name),1),t("div",ie,"@"+r(e.user.tag),1),T(t("div",{class:"bio"},r(e.user.bio),513),[[L,e.user.bio.length>0]]),t("div",ae,[_(K),t("span",null,r(i(H).unix(e.user.date).format("ll")),1)]),t("div",re,[t("span",ue,[t("span",{class:"followings",onClick:o[0]||(o[0]=v=>c(e.user))},r(e.user.followingCount)+" following",1),t("span",{class:"followers",onClick:o[1]||(o[1]=v=>f(e.user))},r(e.user.followerCount)+" followers",1)]),e.user.id!==i(g).current?(u(),d("button",{key:0,class:"button",onClick:o[2]||(o[2]=v=>y(e.user))},r(e.user.following?"unfollow":"follow"),1)):x("",!0),e.user.id===i(g).current?(u(),d("button",{key:1,class:"button",onClick:o[3]||(o[3]=v=>m())},"edit profile")):x("",!0)])])):(u(),d("div",ne,[_(C)]))],64))}});const ge=b(ce,[["__scopeId","data-v-ec1b7ea1"]]);export{ge as U};
