import{d as p,u as m,r as y,o,c as r,a as l,b as i,S as h,t as g,_ as v,e as P,f as x,g as u,h as d,F as _,i as k}from"./index.dd9a2301.js";import{I as L,c as F,L as b}from"./Loader.503a8bf7.js";import{P as C}from"./Post.cc7a8843.js";import"./date.6932e95c.js";const H={class:"post-create"},I={class:"bottom"},V=p({__name:"PostCreate",setup(f){const t=m(),e=y({limit:256,current:0,value:"",type:"multi"}),s=()=>{e.value.value.length>e.value.limit||(t.post(e.value.value),e.value.current=0,e.value.value="")};return(n,a)=>(o(),r("div",H,[l(L,{type:"text",text:e.value,class:"input",placeholder:"Write your thoughts..."},null,8,["text"]),i("div",I,[l(h,{class:"icon",onClick:a[0]||(a[0]=w=>s())}),i("span",null,g(`${e.value.current}/${e.value.limit}`),1)])]))}});const B=v(V,[["__scopeId","data-v-366a6249"]]),S=p({__name:"HomeView",setup(f){const t=m(),e=F();let s=!1;e.value.wait(t.fetchFeedPosts("newer",!0));const n=async a=>{s||(s=!0,window.scrollY<=0?await t.fetchFeedPosts("newer"):window.innerHeight+window.scrollY>=document.body.offsetHeight&&await t.fetchFeedPosts("older"),s=!1)};return P(()=>{window.addEventListener("scroll",n)}),x(()=>{window.removeEventListener("scroll",n)}),(a,w)=>(o(),r(_,null,[l(B),u(e).status?(o(),d(b,{key:0,class:"loader"})):(o(!0),r(_,{key:1},k(u(t).getFeedPosts,c=>(o(),d(C,{post:c,key:c.id},null,8,["post"]))),128))],64))}});const D=v(S,[["__scopeId","data-v-4f6ab499"]]);export{D as default};
