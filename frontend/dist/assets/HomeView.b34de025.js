import{d as f,u as m,r as d,o as v,a as r,c as u,b as i,e as h,S as y,t as P,f as c,_ as w,g as x,h as _,F as p,i as k}from"./index.24049e98.js";import{P as L}from"./Post.2466f0a0.js";import{c as F,L as H}from"./Loader.efc6bd8f.js";import"./date.6932e95c.js";const I={class:"post-create"},C={class:"bottom"},V=f({__name:"PostCreate",setup(g){const s=m(),o=d(null),t=d({limit:256,current:0}).value,n=()=>{const e=o.value;!e||(t.current=e.value.length,e.style.height="0",e.style.height=e.scrollHeight+"px")},l=()=>{const e=o.value;!e||e.value.length>t.limit||(s.post(e.value),e.value="",n())};return v(()=>{n()}),(e,a)=>(r(),u("div",I,[i("textarea",{class:"input",ref_key:"contentInput",ref:o,placeholder:"Write your thoughts...",onInput:n},null,544),i("div",C,[h(y,{class:"icon",onClick:a[0]||(a[0]=$=>l())}),i("span",null,P(`${c(t).current}/${c(t).limit}`),1)])]))}});const B=w(V,[["__scopeId","data-v-a39c4d42"]]),S=f({__name:"HomeView",setup(g){const s=m(),o=F();let t=!1;o.value.wait(s.fetchFeedPosts("newer",!0));const n=async l=>{t||(t=!0,window.scrollY<=0?await s.fetchFeedPosts("newer"):window.innerHeight+window.scrollY>=document.body.offsetHeight&&await s.fetchFeedPosts("older"),t=!1)};return v(()=>{window.addEventListener("scroll",n)}),x(()=>{window.removeEventListener("scroll",n)}),(l,e)=>(r(),u(p,null,[h(B),c(o).status?(r(),_(H,{key:0,class:"loader"})):(r(!0),u(p,{key:1},k(c(s).getFeedPosts,a=>(r(),_(L,{post:a,key:a.id},null,8,["post"]))),128))],64))}});const D=w(S,[["__scopeId","data-v-e1c4af93"]]);export{D as default};
