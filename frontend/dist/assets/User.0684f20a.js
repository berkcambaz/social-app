import{_ as k,a as i,c,s as S,d as P,j as C,r as y,o as N,f as a,b as t,x as _,t as u,e as b,m as f,p as V,l as E,h as F,w as T,v as L,F as j,k as I,y as D}from"./index.60ba7ea9.js";import{d as H}from"./date.6932e95c.js";import{c as M,L as U}from"./Loader.e6069d97.js";const z={},q={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},A=S('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><rect x="4" y="5" width="16" height="16" rx="2"></rect><line x1="16" y1="3" x2="16" y2="7"></line><line x1="8" y1="3" x2="8" y2="7"></line><line x1="4" y1="11" x2="20" y2="11"></line><line x1="11" y1="15" x2="12" y2="15"></line><line x1="12" y1="15" x2="12" y2="18"></line>',7),G=[A];function J(e,h){return i(),c("svg",q,G)}const K=k(z,[["render",J]]),p=e=>(V("data-v-eccb80a1"),e=e(),E(),e),O={key:0,class:"user-edit-profile"},Q={class:"container"},R={class:"text-section"},W=p(()=>t("label",{for:"username"},"username",-1)),X={class:"text-section"},Y=p(()=>t("label",{for:"bio"},"bio",-1)),Z=["disabled"],ee={key:0,class:"loader-container"},te=P({__name:"UserEditProfile",props:{editingProfile:{type:Boolean},user:null},setup(e){const{editingProfile:h,user:r}=e,x=C(),v=M(),d=y(null),m=y({limit:32,current:0}).value,s=y(null),o=y({limit:256,current:0}).value,g=()=>{const n=d.value;!n||(m.current=n.value.length)},w=()=>{const n=s.value;!n||(o.current=n.value.length,n.style.height="0",n.style.height=n.scrollHeight+"px")},B=async()=>{if(!d.value||!s.value)return!1;const n=d.value.value,l=s.value.value;return n.length===0||n.length>32||l.length>256?!1:(await v.value.wait(x.editUser(n,l)),!0)};return N(()=>{d.value&&r&&(d.value.value=r.name),s.value&&r&&(s.value.value=r.bio),g(),w()}),(n,l)=>e.editingProfile||a(v).status?(i(),c("div",O,[t("div",{class:"background",onClick:l[0]||(l[0]=$=>e.editingProfile=!1)}),t("div",Q,[t("div",R,[W,_(" "+u(`${a(m).current}/${a(m).limit}`),1)]),t("input",{type:"text",id:"username",class:"singleline-input",ref_key:"usernameInput",ref:d,onInput:l[1]||(l[1]=$=>g())},null,544),t("div",X,[Y,_(" "+u(`${a(o).current}/${a(o).limit}`),1)]),t("textarea",{class:"multiline-input",ref_key:"bioInput",ref:s,onInput:l[2]||(l[2]=$=>w())},null,544),t("button",{class:"button",onClick:l[3]||(l[3]=async()=>{await B()&&(e.editingProfile=!1)}),disabled:a(v).status},"done",8,Z),a(v).status?(i(),c("div",ee,[b(U)])):f("",!0)])])):f("",!0)}});const se=k(te,[["__scopeId","data-v-eccb80a1"]]),ne={key:1,class:"user"},oe={key:2,class:"user"},le={key:3,class:"user"},ie={class:"username"},ae={class:"usertag"},re={class:"date"},ue={class:"bottom"},ce={class:"follow-container"},de=P({__name:"User",props:{user:null,searching:{type:Boolean}},setup(e){const h=C(),r=y(!1),x=s=>{s!==null&&h.follow(s)},v=s=>{s!==null&&I.push(`/user/${s.tag}/followers`)},d=s=>{s!==null&&I.push(`/user/${s.tag}/followings`)},m=()=>{r.value=!1,D(()=>{r.value=!0})};return(s,o)=>(i(),c(j,null,[r.value&&e.user?(i(),F(se,{key:0,editingProfile:r.value,user:e.user},null,8,["editingProfile","user"])):f("",!0),!e.user&&!e.searching?(i(),c("div",ne,"user not found")):f("",!0),!e.user&&e.searching?(i(),c("div",oe,[b(U)])):f("",!0),e.user?(i(),c("div",le,[t("div",ie,u(e.user.name),1),t("div",ae,"@"+u(e.user.tag),1),T(t("div",{class:"bio"},u(e.user.bio),513),[[L,e.user.bio.length>0]]),t("div",re,[b(K),t("span",null,u(a(H).unix(e.user.date).format("ll")),1)]),t("div",ue,[t("span",ce,[t("span",{class:"followings",onClick:o[0]||(o[0]=g=>d(e.user))},u(e.user.followingCount)+" following",1),t("span",{class:"followers",onClick:o[1]||(o[1]=g=>v(e.user))},u(e.user.followerCount)+" followers",1)]),e.user.id!==a(h).current?(i(),c("button",{key:0,class:"button",onClick:o[2]||(o[2]=g=>x(e.user))},u(e.user.following?"unfollow":"follow"),1)):f("",!0),e.user.id===a(h).current?(i(),c("button",{key:1,class:"button",onClick:o[3]||(o[3]=g=>m())},"edit profile")):f("",!0)])])):f("",!0)],64))}});const he=k(de,[["__scopeId","data-v-07cba22f"]]);export{he as U};
