import{_ as h,a as c,c as a,b as e,d as $,u as g,g as y,r as B,t as d,f as _,e as k,n as p,h as I,o as U,i as b,j as C,F as M,k as F}from"./index.52a2db16.js";import{d as w}from"./date.6932e95c.js";const H={},L={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},j=e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),z=e("path",{d:"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"},null,-1),E=[j,z];function N(s,t){return c(),a("svg",L,E)}const S=h(H,[["render",N]]),V={},Y={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},D=e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),T=e("path",{d:"M9 4h6a2 2 0 0 1 2 2v14l-5 -3l-5 3v-14a2 2 0 0 1 2 -2"},null,-1),q=[D,T];function A(s,t){return c(),a("svg",Y,q)}const G=h(V,[["render",A]]),J={},K={width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},O=e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),Q=e("circle",{cx:"5",cy:"12",r:"1"},null,-1),R=e("circle",{cx:"12",cy:"12",r:"1"},null,-1),W=e("circle",{cx:"19",cy:"12",r:"1"},null,-1),X=[O,Q,R,W];function Z(s,t){return c(),a("svg",K,X)}const ee=h(J,[["render",Z]]),se={key:0,class:"post"},te={key:1,class:"post"},ne={class:"top"},oe={class:"username"},le={class:"usertag"},ce=["title"],ie={class:"mid"},re={class:"bottom"},ae={class:"count"},de=$({__name:"Post",props:{post:null},setup(s){const{post:t}=s,n=g(),i=y(),o=B(null),v=()=>{o.value!==null&&I.push(`/user/${o.value.tag}`)},u=r=>{r!==null&&n.like(r)},x=r=>{r!==null&&n.bookmark(r)},P=()=>{t.userId===i.current&&t!==null&&n.delete(t)},m=async()=>{if(o.value=i.getUserById(t.userId),o.value===null)await i.fetchUserById(t.userId);else return;setTimeout(()=>{m()},500)};return m(),(r,l)=>o.value?(c(),a("div",te,[e("div",ne,[e("span",null,[e("span",{class:"user-info",onClick:l[0]||(l[0]=f=>v())},[e("span",oe,d(o.value.name),1),e("span",le,"@"+d(o.value.tag),1)]),e("span",{class:"date",title:_(w).unix(s.post.date).format("lll")},d(_(w).unix(s.post.date).fromNow()),9,ce)]),e("span",null,[k(ee,{class:"icon more",onClick:l[1]||(l[1]=f=>P())})])]),e("div",ie,d(s.post.content),1),e("div",re,[e("span",ae,d(s.post.likeCount),1),k(S,{class:p(["icon",{active:s.post.liked}]),onClick:l[2]||(l[2]=f=>u(s.post))},null,8,["class"]),k(G,{class:p(["icon",{active:s.post.bookmarked}]),onClick:l[3]||(l[3]=f=>x(s.post))},null,8,["class"])])])):(c(),a("div",se,"Loading..."))}});const ue=h(de,[["__scopeId","data-v-1fb410dc"]]),fe=$({__name:"PostLister",props:{user:null},setup(s){const{user:t}=s,n=g();t===null?n.fetchFeedPosts("newer",!0):n.fetchUserPosts(t.id,"newer",!0);const i=o=>{window.scrollY<=0&&(t===null?n.fetchFeedPosts("newer"):n.fetchUserPosts(t.id,"newer")),window.innerHeight+window.scrollY>=document.body.offsetHeight&&(t===null?n.fetchFeedPosts("older"):n.fetchUserPosts(t.id,"older"))};return U(()=>{window.addEventListener("scroll",i)}),b(()=>{window.removeEventListener("scroll",i)}),(o,v)=>(c(!0),a(M,null,C(s.user===null?_(n).getFeedPosts:_(n).getUserPosts(s.user),u=>(c(),F(ue,{post:u,key:u.id},null,8,["post"]))),128))}});export{fe as _};
